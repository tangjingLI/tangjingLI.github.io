---
layout: post
title:  "JVM的垃圾回收机制"
date:   2020-11-25 11:22:36 +0800
tags: java GC
subtitle: 'Garbage Collection ~'
---

#### Java的引用

<b>强引用</b><br>
形如 Object obj = new Object()，JVM宁可报内存溢出OutOfMemory异常也不会回收强引用对象<br>
<b>软引用</b><br>
软引用描述可能还有用但非必须的对象，在内存不够用时进行回收<br>
<b>弱引用</b><br>
弱引用也是描述可能还有用但非必须的对象，但比软引用更弱，在触发GC时回收所有的弱引用对象<br>
<b>虚引用（幻引用）</b><br>
与对象的生命周期没有关系，只是跟踪对象什么时候被JVM回收<br>

#### 什么是垃圾

<font size=2>Java中的对象实例基本上都存放在堆上，因此Java的自动垃圾回收也主要是针对堆进行的，在JVM眼中，垃圾是指不能通过任何途径再次被使用的对象</font>

#### 找垃圾

<b>引用计数法</b>
<font size=2>当一个对象被创建并且初始化赋值后，该对象的引用计数器的值就设为 1<br>每当有一个新的地方引用它时，该对象的引用计数器的值就加 1，当有一个引用失效时计数器的值就减 1<br>当一个对象的引用计数为0时，它就成为了可以被回收的垃圾<br>特别地，当一个对象被当做垃圾收集时，它引用的任何对象的计数器的值都减 1</font>


<b>可达性分析法(根搜索法)</b>
<font size=2>根集是指正在执行的 Java 程序可以访问的引用变量（不是对象）的集合，程序可以使用引用变量访问对象的属性和调用对象的方法。根集包含许多根对象GC Roots。可达性分析法的基本思路是：将一系列的GC Roots作为起始点，从这些节点开始向下搜索，搜索所走过的路径称为引用链，如果一个对象到根对象没有任何引用链相连，那么这个对象就不是可达的，也称之为不可达对象，即为垃圾回收的目标。</font>

#### 垃圾回收

- 标记-清除算法
- 标记-整理算法
- 复制算法